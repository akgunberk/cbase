// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:../lib/database.db"
}

model User {
  id              Int             @id @default(autoincrement())
  username        String          @unique
  project         Project         @relation(fields: [selectedProject], references: [name])
  selectedProject String
  queries         CodebaseQuery[]
  isActive        Boolean         @default(false)
}

model Project {
  id   Int    @id @default(autoincrement())
  name String @unique
  User User[]
}

model CodebaseQuery {
  id     Int    @id @default(autoincrement())
  name   String @unique
  query  String
  user   User   @relation(fields: [userId], references: [id])
  userId Int
}

model Ticket {
  ticketId   String   @id
  summary    String
  ticketType String
  assignee   String
  reporter   String
  categoryId String
  statusId   String
  priorityId String
  type       Type     @relation(fields: [ticketType], references: [name])
  category   Category @relation(fields: [categoryId], references: [id])
  status     Status   @relation(fields: [statusId], references: [id])
  priority   Priority @relation(fields: [priorityId], references: [id])
}

model Status {
  id            String   @id
  name          String   @unique
  colour        String
  treatAsClosed Boolean
  Ticket        Ticket[]
}

model Category {
  id     String   @id
  name   String
  Ticket Ticket[]
}

model Type {
  id     String   @id
  name   String   @unique
  icon   String
  Ticket Ticket[]
}

model Priority {
  id     String   @id
  name   String
  colour String
  Ticket Ticket[]
}
